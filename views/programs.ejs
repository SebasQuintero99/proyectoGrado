<div>
    <h1>Gesti√≥n de Programas</h1>

<form action="<%= programToEdit ? '/programs/update' : '/programs/add' %>" method="POST" class="mt-3 mb-4">
    <% if (programToEdit) { %>
        <input type="hidden" name="id_programa" value="<%= programToEdit.id_programa %>">
    <% } %>
    <div class="input-group form-control w-50">
        <input 
            type="text" 
            name="nombre_programa" 
            class="form-control" 
            placeholder="Nombre del programa" 
            value="<%= programToEdit ? programToEdit.nombre_programa : '' %>" 
            required>
        <button type="submit" class="btn <%= programToEdit ? 'btn-warning' : 'btn-success' %>">
            <%= programToEdit ? 'Actualizar' : 'Agregar' %>
        </button>
    </div>
    <% if (programToEdit) { %>
        <a href="/programs" class="btn btn-secondary mt-2">Cancelar</a>
    <% } %>
</form>


    <!-- Tabla de Programas -->
    <table id="programs" class="table table-striped" style="width:100%">
        <thead>
            <tr>
                <th>#</th>
                <th>Nombre del Programa</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="programs-table-body">
            <% programs.forEach((program, index) => { %>
            <tr>
                <td><%= index + 1 %></td>
                <td><%= program.nombre_programa %></td>
                <td>
                    <a href="/programs?editId=<%= program.id_programa %>" class="btn btn-primary btn-sm">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <button 
                        class="btn btn-danger btn-sm delete-btn" 
                        data-id="<%= program.id_programa %>" 
                        data-entity="programs"
                    >
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </td>
            </tr>
            <% }) %>
        </tbody>
    </table>

</div>
<script src="/js/deleteHandler.js"></script>

<script>

    new DataTable('#programs', {

        layout: {
   
            topStart: {
                buttons:  [

                    {
                        extend: 'excelHtml5',
                        text: '<button class="btn btn-success mt-1"></button><i class="fa fa-file-excel-o"></i>Excel',
                        titleAttr: 'Excel',
                        className: 'btn btn-success'
                    },

                    {
                        extend: 'pdfHtml5',
                        text: '<button class="btn btn-danger"></button><i class="fa fa-file-pdf-o"></i> PDF',
                        titleAttr: 'PDF',
                        className: 'btn btn-danger'
                    }
                ]
            }
        }
        
    });
    </script>

<!-- <script>
    document.querySelectorAll('.btn-secondary').forEach(button => {
  button.classList.remove('btn-secondary'); // Eliminar clase existente
});
</script> -->


